name: Test Build

on:
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  test-build:
    runs-on: windows-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ğŸ”§ Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '9.0.x'

    - name: ğŸ“‹ List project files
      run: |
        Write-Host "=== Project Files ==="
        Get-ChildItem -Name "*.csproj"
        Get-ChildItem -Name "*.sln"
        Write-Host "=== Directory Structure ==="
        Get-ChildItem -Recurse -Directory | Select-Object Name, FullName | Format-Table

    - name: ğŸ“¦ Restore dependencies
      run: |
        Write-Host "=== Restoring Dependencies ==="
        dotnet restore ReturnOrderGenerator.csproj --verbosity detailed

    - name: ğŸ—ï¸ Build Debug
      run: |
        Write-Host "=== Building Debug Configuration ==="
        dotnet build ReturnOrderGenerator.csproj --configuration Debug --verbosity detailed --no-restore

    - name: ğŸ—ï¸ Build Release
      run: |
        Write-Host "=== Building Release Configuration ==="
        dotnet build ReturnOrderGenerator.csproj --configuration Release --verbosity detailed --no-restore

    - name: âœ… Build Success
      run: Write-Host "âœ… All builds completed successfully!" -ForegroundColor Green